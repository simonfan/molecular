//     subject
//     (c) simonfan
//     subject is licensed under the MIT terms.

//     Molecular
//     (c) sfan
//     Molecular is licensed under the MIT terms.

define("__subject/private/assign",["require","exports","module","lodash"],function(e,t,r){function n(e,t,r){if(s.defaults(r,o),!s.isArray(t))throw new Error("Currently subject.assign does not accept non-array properties for accessor assignment.");s.each(t,function(t){var n=s.extend({},r);n.get&&(n.get=s.partial(n.get,t)),n.set&&(n.set=s.partial(n.set,t)),Object.defineProperty(e,t,n)})}function i(e,t,r){s.defaults(r,a),s.each(t,function(t,n){var i=s.assign({value:t},r);Object.defineProperty(e,n,i)})}var s=e("lodash"),o={configurable:!0,enumerable:!0},a=s.extend({writable:!0},o);r.exports=function(e,t,r){return r?r.get||r.set?n(e,t,r):i(e,t,r):s.assign(e,t),e}}),define("__subject/public/assign-proto",["require","exports","module","lodash","../private/assign"],function(e,t,r){var n=e("lodash"),i=e("../private/assign");r.exports=function(){var e,t;return n.isObject(arguments[0])?(e=arguments[0],t=arguments[1]):n.isString(arguments[0])&&(e={},e[arguments[0]]=arguments[1],t=arguments[2]),i(this.prototype,e,t),this}}),define("__subject/public/proto-merge",["require","exports","module","lodash","../private/assign"],function(e,t,r){var n=e("lodash"),i=e("../private/assign");r.exports=function(){var e,t,r;if(n.isString(arguments[0])){var s=arguments[0];e=this.prototype[s],t=arguments[1],r=arguments[2],this.prototype[s]=i(n.create(e),t,r)}else r=arguments[1],n.each(arguments[0],n.bind(function(e,t){this.protoMerge(t,e,r)},this));return this}}),define("__subject/public/extend",["require","exports","module","lodash","../private/assign"],function(e,t,r){var n=e("lodash"),i=e("../private/assign");r.exports=function(e,t){var r,s=this;return r=function(){var e=n.create(r.prototype);return e.initialize.apply(e,arguments),e},i(r,n.pick(s,s.staticProperties),{enumerable:!1}),r.prototype=n.create(s.prototype),r.assignProto(e,t),i(r.prototype,{constructor:r,__super__:s.prototype},{enumerable:!1}),r}}),define("subject",["require","exports","module","lodash","./__subject/private/assign","./__subject/public/assign-proto","./__subject/public/assign-proto","./__subject/public/proto-merge","./__subject/public/extend"],function(e,t,r){var n=e("lodash"),i=e("./__subject/private/assign"),s=function(){};s.prototype=i({},{initialize:function(){}},{enumerable:!1}),i(s,{staticProperties:["proto","assignProto","protoMerge","staticProperties","assignStatic","extend"],assignStatic:function(){var e,t,r;return n.isString(arguments[0])?(e={},e[arguments[0]]=arguments[1],t=[arguments[0]],r=arguments[2]):n.isObject(arguments[0])&&(e=arguments[0],t=n.keys(e),r=arguments[1]),this.staticProperties=n.union(this.staticProperties,t),i(this,e,r)},assignProto:e("./__subject/public/assign-proto"),proto:e("./__subject/public/assign-proto"),protoMerge:e("./__subject/public/proto-merge"),extend:e("./__subject/public/extend")},{enumerable:!1}),r.exports=n.bind(s.extend,s);var o={assign:i};i(r.exports,o,{enumerable:!1,writable:!1,configurable:!1})}),define("molecular/auxiliary",["require","exports","module"],function(e,t){t.transfer=function(e,t,r){_.each(e,function(e){r[e]||(r[e]=t[e])})},t.toCamelCase=function(e){return e.replace(/[-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""})},t.toDashed=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}}),define("molecular/node/message-constructor",["require","exports","module","subject","lodash"],function(e,t){{var r=e("subject"),n=e("lodash"),i=t.base=r({initialize:function(e){n.assign(this,e),this.propagate=!0}});t.message=i.extend({initialize:function(e){i.prototype.initialize.call(this,e)},respond:function(e){this.response=e,this.propagate=!1}}),t.broadcast=i.extend({initialize:function(e){i.prototype.initialize.call(this,e),this.response=[]},respond:function(e){this.response.push(e)}})}}),define("molecular/node/message-system",["require","exports","module","es5-shim","molecular/node/message-constructor"],function(e,t){function r(e,t,n){n=n||[e];var s=n.shift();return s?(i(s,t),t.propagate?(n=s.getUpstream().concat(n),r(e,t,n)):t.response):t.response}function n(e,t,r){r=r||e.getDownstream();var s=r.shift();return s?(i(s,t),t.propagate?(r=s.getDownstream().concat(r),n(e,t,r)):t.response):t.response}function i(e,t){if(!t.type)throw new Error("No message type set.");var r=e.messageReceivers[t.type];r.call(e,t)}e("es5-shim");var s=e("molecular/node/message-constructor");t.sendMessage=function(e,t){e.data=e.data||t,e.sender=this;var i=s.message(e);return"downstream"===e.direction?n(this,i):r(this,i)},t.messageReceivers={invocation:function(e){var t=this[e.method];if(t){var r=t.call(this,e);e.respond(r)}},event:function(e){this.emit(e.name,e,e.data)}}}),define("molecular/node/channel-system",["require","exports","module","es5-shim"],function(e,t){e("es5-shim"),t.addUpstream=function(e){return Array.isArray(e)?e.forEach(this.addUpstream.bind(this)):this.isUpstream(e)||(this.upstreamNodes.push(e),e.addDownstream(this)),this},t.getUpstream=function(e){return 0===arguments.length?this.upstreamNodes:this.upstreamNodes[e]},t.isUpstream=function(e){return 0===arguments.length?0!==this.getUpstream().length:-1!==this.getUpstream().indexOf(e)},t.getDownstream=function(e){return 0===arguments.length?this.downstreamNodes:this.downstreamNodes[e]},t.addDownstream=function(e){Array.isArray(e)?e.forEach(this.addDownstream.bind(this)):this.isDownstream(e)||(this.downstreamNodes.push(e),e.addUpstream(this))},t.isDownstream=function(e){return 0===arguments.length?0!==this.getDownstream().length:-1!==this.getDownstream().indexOf(e)}}),define("molecular/node",["require","exports","module","subject","molecular/auxiliary","molecular/node/message-system","molecular/node/channel-system"],function(e,t,r){var n=e("subject"),i=(e("molecular/auxiliary"),n({initialize:function(e){e=e||{},this.upstreamNodes=[],this.downstreamNodes=[],e.upstream&&this.addUpstream(e.upstream),e.downstream&&this.addDownstream(e.downstream)}}));i.assignProto(e("molecular/node/message-system")).assignProto(e("molecular/node/channel-system")),r.exports=i}),define("molecular/view/dom-manipulation",["require","exports","module"],function(e,t){t.html=function(){this.element.html.apply(this.element,_.toArray(arguments))},t.css=function(){this.element.css.apply(this.element,_.toArray(arguments))}});var JSON5="object"==typeof exports?exports:{};JSON5.parse=function(){var e,t,r,n,i={"'":"'",'"':'"',"\\":"\\","/":"/","\n":"",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},s=function(t){var n=new SyntaxError;throw n.message=t,n.at=e,n.text=r,n},o=function(n){return n&&n!==t&&s("Expected '"+n+"' instead of '"+t+"'"),t=r.charAt(e),e+=1,t},a=function(){var e=t;for("_"!==t&&"$"!==t&&("a">t||t>"z")&&("A">t||t>"Z")&&s("Bad identifier");o()&&("_"===t||"$"===t||t>="a"&&"z">=t||t>="A"&&"Z">=t||t>="0"&&"9">=t);)e+=t;return e},u=function(){var e,r="",n="",i=10;if(("-"===t||"+"===t)&&(r=n=t,o(t)),"I"===t)return e=d(),("number"!=typeof e||isNaN(e))&&s("Unexpected word for number"),"-"===r?-e:e;switch("0"===t&&(n+=t,o(),"x"===t||"X"===t?(n+=t,o(),i=16):t>="0"&&"9">=t&&s("Octal literal")),16===i&&r&&s("Signed hexadecimal literal"),i){case 10:for(;t>="0"&&"9">=t;)n+=t,o();if("."===t)for(n+=".";o()&&t>="0"&&"9">=t;)n+=t;if("e"===t||"E"===t)for(n+=t,o(),("-"===t||"+"===t)&&(n+=t,o());t>="0"&&"9">=t;)n+=t,o();break;case 16:for(;t>="0"&&"9">=t||t>="A"&&"F">=t||t>="a"&&"f">=t;)n+=t,o()}return e=+n,isFinite(e)?e:void s("Bad number")},c=function(){var e,r,n,a,u="";if('"'===t||"'"===t)for(n=t;o();){if(t===n)return o(),u;if("\\"===t)if(o(),"u"===t){for(a=0,r=0;4>r&&(e=parseInt(o(),16),isFinite(e));r+=1)a=16*a+e;u+=String.fromCharCode(a)}else{if("string"!=typeof i[t])break;u+=i[t]}else{if("\n"===t)break;u+=t}}s("Bad string")},l=function(){"/"!==t&&s("Not an inline comment");do if(o(),"\n"===t)return void o("\n");while(t)},f=function(){"*"!==t&&s("Not a block comment");do for(o();"*"===t;)if(o("*"),"/"===t)return void o("/");while(t);s("Unterminated block comment")},m=function(){"/"!==t&&s("Not a comment"),o("/"),"/"===t?l():"*"===t?f():s("Unrecognized comment")},p=function(){for(;t;)if("/"===t)m();else{if(!(" ">=t))return;o()}},d=function(){switch(t){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null;case"I":return o("I"),o("n"),o("f"),o("i"),o("n"),o("i"),o("t"),o("y"),1/0}s("Unexpected '"+t+"'")},h=function(){var e=[];if("["===t)for(o("["),p();t;){if("]"===t)return o("]"),e;if(","===t?s("Missing array element"):e.push(n()),p(),","!==t)return o("]"),e;o(","),p()}s("Bad array")},g=function(){var e,r={};if("{"===t)for(o("{"),p();t;){if("}"===t)return o("}"),r;if(e='"'===t||"'"===t?c():a(),p(),o(":"),Object.hasOwnProperty.call(r,e)&&s('Duplicate key "'+e+'"'),r[e]=n(),p(),","!==t)return o("}"),r;o(","),p()}s("Bad object")};return n=function(){switch(p(),t){case"{":return g();case"[":return h();case'"':case"'":return c();case"-":case"+":case".":return u();default:return t>="0"&&"9">=t?u():d()}},function(i,o){var a;return r=i,e=0,t=" ",a=n(),p(),t&&s("Syntax error"),"function"==typeof o?function u(e,t){var r,n,i=e[t];if(i&&"object"==typeof i)for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n=u(i,r),void 0!==n?i[r]=n:delete i[r]);return o.call(e,t,i)}({"":a},""):a}}(),JSON5.stringify=function(e,t,r){function n(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||e>="0"&&"9">=e||"_"===e||"$"===e}function i(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e}function s(e){if("string"!=typeof e)return!1;if(!i(e[0]))return!1;for(var t=1,r=e.length;r>t;){if(!n(e[t]))return!1;t++}return!0}function o(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function a(e){return"[object Date]"===Object.prototype.toString.call(e)}function u(e){for(var t=0;t<p.length;t++)if(p[t]===e)throw new TypeError("Converting circular structure to JSON")}function c(e,t,r){if(!e)return"";e.length>10&&(e=e.substring(0,10));for(var n=r?"":"\n",i=0;t>i;i++)n+=e;return n}function l(e){return d.lastIndex=0,d.test(e)?'"'+e.replace(d,function(e){var t=h[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function f(e){var t,r;switch(e&&!a(e)&&(e=e.valueOf()),typeof e){case"boolean":return e.toString();case"number":return isNaN(e)||!isFinite(e)?"null":e.toString();case"string":return l(e.toString());case"object":if(null===e)return"null";if(a(e))return l(e.toJSON());if(o(e)){u(e),t="[",p.push(e);for(var n=0;n<e.length;n++)r=f(e[n]),t+=c(m,p.length),t+=null===r||"undefined"==typeof r?"null":r,n<e.length-1?t+=",":m&&(t+="\n");p.pop(),t+=c(m,p.length,!0)+"]"}else{u(e),t="{";var i=!1;p.push(e);for(var d in e)if(e.hasOwnProperty(d)){var h=f(e[d]);if("undefined"!=typeof h&&null!==h){t+=c(m,p.length),i=!0;var g=s(d)?d:l(d);t+=g+":"+(m?" ":"")+h+","}}p.pop(),t=i?t.substring(0,t.length-1)+c(m,p.length)+"}":"{}"}return t;default:return void 0}}if(t)throw new Error("JSON5 does not support the replacer parameter. Use JSON instead.");JSON5.isWord=s,isNaN=isNaN||function(e){return"number"==typeof e&&e!==e};var m,p=[];r&&("string"==typeof r?m=r:"number"==typeof r&&r>=0&&(m=c(" ",r,!0)));var d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return void 0===e?void 0:f(e,t,r)},define("json5",function(e){return function(){var t;return t||e.JSON5}}(this)),define("molecular/view/directives/dom-events",["require","exports","module","json5"],function(e,t){function r(e,t){var r=this[e];if(!_.isFunction(r))throw new Error('[molecular/view] "'+e+'" is not a function.');r.apply(this,t)}function n(e){var t=e.match(s);return t?{name:t[1],args:i.parse("["+t[2]+"]")}:{name:e,args:[]}}var i=e("json5"),s=/(.+?)\((.*?)\)/;t.mClick=function(e,t){var i=n(t);e.on("click",_.partial(r,i.name,i.args).bind(this))},t.mMouseover=function(e,t){var i=n(t);e.on("mouseover",_.partial(r,i.name,i.args).bind(this))}}),define("molecular/view/directives",["require","exports","module","es5-shim","lodash","molecular/auxiliary","molecular/view/directives/dom-events"],function(e,t){function r(e,t){var r="[data-"+i.toDashed(t)+"]";return $(e).find(r)}e("es5-shim");var n=e("lodash"),i=e("molecular/auxiliary"),s={};s.mView=function(t,r){e([r],function(e){var r=e({element:t});this.addChild(r)}.bind(this))},n.assign(s,e("molecular/view/directives/dom-events")),t.directives=s,t.incorporate=function(e){return n.each(this.directives,function(t,i){var s=r(e,i);n.each(s,function(e){e=$(e);var r=e.data(i);t.call(this,e,r)}.bind(this))}.bind(this)),this}}),define("molecular/view/rendering",["require","exports","module","es5-shim","lodash"],function(e,t){e("es5-shim");var r=e("lodash");t.render=function(e){var t,n=this.template;if(n){var i=this.parseTemplateData(e);r.isString(n)&&(n=this.template=this.compileTemplate(n)),t=n(i),this.element.html(t)}return this.incorporate(this.element),this},t.parseTemplateData=function(e){return e},t.template=void 0,t.compileTemplate=r.template}),define("molecular/view",["require","exports","module","lodash","jquery","molecular/node","molecular/auxiliary","molecular/view/dom-manipulation","molecular/view/directives","molecular/view/rendering"],function(e,t,r){var n=e("lodash"),i=e("jquery"),s=e("molecular/node"),o=e("molecular/auxiliary"),a=s.extend({initialize:function(e){s.prototype.initialize.call(this,e),o.transfer(["element","template"],e,this),this.element=i(e.element),this.render(e)}});a.assignProto(e("molecular/view/dom-manipulation")).assignProto(e("molecular/view/directives")).assignProto(e("molecular/view/rendering"));var u=a.extend;a.assignStatic("extend",function(e,t){return e.directives=n.assign({},this.prototype.directives,e.directives),u.call(this,e,t)}),r.exports=a}),define("molecular",["require","exports","module","molecular/node","molecular/view"],function(e,t){t.node=e("molecular/node"),t.view=e("molecular/view")});