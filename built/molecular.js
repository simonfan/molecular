//     subject
//     (c) simonfan
//     subject is licensed under the MIT terms.

//     Molecular
//     (c) sfan
//     Molecular is licensed under the MIT terms.

define("__subject/private/assign",["require","exports","module","lodash"],function(e,t,r){function i(e,t,r){if(s.defaults(r,o),!s.isArray(t))throw new Error("Currently subject.assign does not accept non-array properties for accessor assignment.");s.each(t,function(t){var i=s.extend({},r);i.get&&(i.get=s.partial(i.get,t)),i.set&&(i.set=s.partial(i.set,t)),Object.defineProperty(e,t,i)})}function n(e,t,r){s.defaults(r,a),s.each(t,function(t,i){var n=s.assign({value:t},r);Object.defineProperty(e,i,n)})}var s=e("lodash"),o={configurable:!0,enumerable:!0},a=s.extend({writable:!0},o);r.exports=function(e,t,r){return r?r.get||r.set?i(e,t,r):n(e,t,r):s.assign(e,t),e}}),define("__subject/public/assign-proto",["require","exports","module","lodash","../private/assign"],function(e,t,r){var i=e("lodash"),n=e("../private/assign");r.exports=function(){var e,t;return i.isObject(arguments[0])?(e=arguments[0],t=arguments[1]):i.isString(arguments[0])&&(e={},e[arguments[0]]=arguments[1],t=arguments[2]),n(this.prototype,e,t),this}}),define("__subject/public/proto-merge",["require","exports","module","lodash","../private/assign"],function(e,t,r){var i=e("lodash"),n=e("../private/assign");r.exports=function(){var e,t,r;if(i.isString(arguments[0])){var s=arguments[0];e=this.prototype[s],t=arguments[1],r=arguments[2],this.prototype[s]=n(i.create(e),t,r)}else r=arguments[1],i.each(arguments[0],i.bind(function(e,t){this.protoMerge(t,e,r)},this));return this}}),define("__subject/public/extend",["require","exports","module","lodash","../private/assign"],function(e,t,r){var i=e("lodash"),n=e("../private/assign");r.exports=function(e,t){var r,s=this;return r=function(){var e=i.create(r.prototype);return e.initialize.apply(e,arguments),e},n(r,i.pick(s,s.staticProperties),{enumerable:!1}),r.prototype=i.create(s.prototype),r.assignProto(e,t),n(r.prototype,{constructor:r,__super__:s.prototype},{enumerable:!1}),r}}),define("subject",["require","exports","module","lodash","./__subject/private/assign","./__subject/public/assign-proto","./__subject/public/assign-proto","./__subject/public/proto-merge","./__subject/public/extend"],function(e,t,r){var i=e("lodash"),n=e("./__subject/private/assign"),s=function(){};s.prototype=n({},{initialize:function(){}},{enumerable:!1}),n(s,{staticProperties:["proto","assignProto","protoMerge","staticProperties","assignStatic","extend"],assignStatic:function(){var e,t,r;return i.isString(arguments[0])?(e={},e[arguments[0]]=arguments[1],t=[arguments[0]],r=arguments[2]):i.isObject(arguments[0])&&(e=arguments[0],t=i.keys(e),r=arguments[1]),this.staticProperties=i.union(this.staticProperties,t),n(this,e,r)},assignProto:e("./__subject/public/assign-proto"),proto:e("./__subject/public/assign-proto"),protoMerge:e("./__subject/public/proto-merge"),extend:e("./__subject/public/extend")},{enumerable:!1}),r.exports=i.bind(s.extend,s);var o={assign:n};n(r.exports,o,{enumerable:!1,writable:!1,configurable:!1})}),define("molecular/auxiliary",["require","exports","module"],function(e,t){t.transfer=function(e,t,r){_.each(e,function(e){r[e]||(r[e]=t[e])})},t.toCamelCase=function(e){return e.replace(/[-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""})},t.toDashed=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}}),define("molecular/node/event-system",["require","exports","module","es5-shim"],function(e,t){e("es5-shim"),t.addEventListener=function(e,t){this._eventHandlers[e]=this._eventHandlers[e]||[],this._eventHandlers[e].push(t)},t.emit=function(e,t){t=t||{},t.type||(t.type=e),t.emitter||(t.emitter=this);var r=!0;if(t.stopPropagation=function(){r=!1},_.each(this._eventHandlers[e],function(e){e(t)}),r){var i=this.getParent();i&&i.emit(e,t)}}}),define("molecular/node/request-system",["require","exports","module","q"],function(e,t){var r=e("q");t.buildRequestObject=function(e,t){var i=r.defer();return i.data=t,i},t.issueRequest=function(e,t){var r=this.buildRequestObject(e,t);return this.processRequest(e,r),r.promise},t.processRequest=function(e,t){if(this.canHandleRequest(e,t))this.handleRequest(e,t);else{var r=this.getParent();r?r.processRequest(e,t):t.reject(new Error("No resolver for "+e+" was found."))}},t.handleRequest=function(e,t){var r=this[e](t.data);t.resolve(r)},t.canHandleRequest=function(e){return _.isFunction(this[e])}}),define("molecular/node",["require","exports","module","subject","molecular/auxiliary","molecular/node/event-system","molecular/node/request-system"],function(e,t,r){var i=e("subject"),n=e("molecular/auxiliary"),s=i({initialize:function(e){e=e||{},n.transfer(["parent"],e,this),this.children=[],this._eventHandlers={}},getParent:function(){return this.parent},setParent:function(e){return this.parent=e,this},addChildren:function(e){return e=Array.isArray(e)?e:[e],e.forEach(function(e){e.setParent(this),this.children.push(e)}.bind(this)),this}});s.assignProto(e("molecular/node/event-system")).assignProto(e("molecular/node/request-system")),r.exports=s}),define("molecular/view/directives/dom-events",["require","exports","module"],function(e,t){function r(e){this[e].apply(this,_.toArray(arguments).slice(2))}t.mClick=function(e,t){e.on("click",_.partial(r,t,e).bind(this))},t.mMouseover=function(e,t){e.on("mouseover",_.partial(r,t,e).bind(this))}}),define("molecular/view/directives",["require","exports","module","es5-shim","lodash","molecular/view/directives/dom-events"],function(e,t){e("es5-shim");var r=e("lodash");r.assign(t,e("molecular/view/directives/dom-events")),t.mView=function(t,r){console.log(r);e([r],function(e){var r=e({element:t});this.addChildren(r)}.bind(this))}}),define("molecular/view/dom-manipulation",["require","exports","module","jquery"],function(e,t){t.DOMElementAdapter=e("jquery")}),define("molecular/view/rendering",["require","exports","module","es5-shim","lodash"],function(e,t){e("es5-shim");var r=e("lodash");t.render=function(e){var t,i=this.template;if(i){var n=this.parseTemplateData(e);r.isString(i)&&(i=this.template=this.compileTemplate(i)),t=i(n),this.element.html(t)}return this},t.parseTemplateData=function(e){return e},t.template=void 0,t.compileTemplate=r.template}),define("molecular/view",["require","exports","module","lodash","molecular/node","molecular/auxiliary","molecular/view/directives","molecular/view/dom-manipulation","molecular/view/rendering"],function(e,t,r){function i(e,t){var r="[data-"+o.toDashed(t)+"]";return e.find(r)}var n=e("lodash"),s=e("molecular/node"),o=e("molecular/auxiliary"),a=s.extend({initialize:function(e){s.prototype.initialize.call(this,e),o.transfer(["element","template","render","compileTemplate"],e,this),this.element=this.DOMElementAdapter(e.element),this.render(e),n.each(this.directives,function(e,t){var r=i(this.element,t);n.each(r,function(r){r=this.DOMElementAdapter(r);var i=r.data(t);e.call(this,r,i)}.bind(this))}.bind(this))},directives:e("molecular/view/directives")});a.assignProto(e("molecular/view/dom-manipulation")).assignProto(e("molecular/view/rendering"));var u=a.extend;a.assignStatic("extend",function(e,t){return e.directives=n.assign({},this.prototype.directives,e.directives),u.call(this,e,t)}),r.exports=a}),define("molecular",["require","exports","module","molecular/node","molecular/view"],function(e,t){t.node=e("molecular/node"),t.view=e("molecular/view")});